<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Mini App</title>
</head>
<body>
    <div id="content">
        <h1>Hello</h1>
    </div>

    <script>
        // Функция для получения параметра startapp из Telegram Web App API
        function getStartParam() {
            // Проверяем доступность Telegram Web App API
            if (window.Telegram && window.Telegram.WebApp) {
                // Безопасный способ получения start_param
                if (window.Telegram.WebApp.initData) {
                    const initData = new URLSearchParams(window.Telegram.WebApp.initData);
                    return initData.get('start_param') || '';
                }
                // Альтернативный способ через initDataUnsafe
                else if (window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.start_param) {
                    return window.Telegram.WebApp.initDataUnsafe.start_param;
                }
            }

            // Fallback на URL параметры для тестирования вне Telegram
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('startapp') || '';
        }

        // Основная логика редиректа
        function handleRedirect() {
            const startParam = getStartParam();

            if (startParam === 'menu1') {
                // Редирект на указанную ссылку
                window.location.href = 'https://eatandsplit.com/?menu=8b82d97a-7db8-4394-9bdd-cfeb8558747d';
            } else if (startParam === '') {
                // Параметр пустой - показываем страницу с hello
                document.getElementById('content').innerHTML = '<h1>Hello</h1>';
            } else {
                // Другие параметры - можно добавить дополнительную логику если нужно
                document.getElementById('content').innerHTML = '<h1>Hello</h1><p>Unknown parameter: ' + startParam + '</p>';
            }
        }

        // Выполняем обработку при загрузке страницы
        window.addEventListener('load', handleRedirect);
    </script>
</body>
</html>
